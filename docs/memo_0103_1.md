戦闘についてアイデアが固まってきたので、要件定義書の内容から更新する。
戦闘部分を更新した要件定義書を他の部分と同様の書式で書いて。
・M＆B式戦闘システム
キャピタルシップ（未実装）を除くすべての船は、本質的にはドローン母艦であり、ドローンを送り込んで戦闘を行う。
すなわち、戦闘はドローン同士の撃ち合い、また場合によっては母艦も参加してのレーザー銃撃戦になる。
ドローンの数はそれぞれの船のグラフィックに＋N のラベルで表記される。マウスオーバーで詳細な内訳がオーバーレイ表示される。
ドローン積載数は上限があり、プレイヤーの場合は搭載量への投資（Perkツリー）、NPCの場合は累積で稼いだ金額、で増加していく。
プレイヤーやNPCは稼いだ金額からドローンを購入し損耗した分を補充、戦力を増強する。
ドローンは最初はベーシックなモデルしかアクセスできないが、戦闘で残ったドローンは一定確率で戦場に残された武器や装置により改修（という設定）でレベルアップする。
大抵数で押した方が強いが、レベル差がある場合は普通に数の優位をひっくり返せるバランスにする。
戦闘は母艦が撃沈されるか、または逃走することで終結する。逃走の場合は一定割合のドローンが破損して失われる。
・プレイヤー非参加の場合の自動解決
ドローンの数やレベルを戦力値に換算し、時間と共に削り合う。戦闘の趨勢に応じて、確率で逃走したり、またはすぐにドローンが全滅した場合などは撃沈されることを決める。
戦場エリアには戦闘の趨勢（優勢・劣勢）を色付きのバーで表示する。
・プレイヤー参加する場合
戦闘は2Dシューティングゲーム形式で行う（グローバルマップと同じ移動方式）
最初は母艦は攻撃能力はなく、ただ自律行動するドローンを眺めるだけの戦闘にする。
撤退ボタンで逃走することができる。
また、プレイヤーはシンボルエンカウント時に自動解決するか、逃走するか、上記の手動戦闘に入るか選べる。

以下、調査内容。すべて取り入れる必要はなく、プロジェクトの現状や開発過程を見ながら、段階的に取り入れる。

# Mount & Blade戦闘システムの設計哲学とドローン戦闘への適用分析

Mount & Bladeシリーズは**「数量と質」のトレードオフ**を中心に据えた戦闘システムで20年以上の歴史を持ち、ストラテジーゲームにおける軍隊管理の金字塔として評価されている。このシステムの核心は、**経済的制約が軍編成の意味ある選択を生み出す**という設計哲学にある。

## 軍隊構成と階層システムの設計原理

Mount & Bladeの兵士システムは**Tier 0〜6の階層構造**を採用している。Bannerlordでは、農民（Tier 0）から始まり、新兵（Tier 1）→訓練兵（Tier 2-3）→ベテラン（Tier 4）→エリート（Tier 5-6）へと成長する。重要なのは、**通常ラインと貴族ライン**の二重構造で、貴族ラインは入手困難だがTier 6の最強ユニットに到達可能という設計だ。

**給与コストの階層スケール**は意思決定の核心を形成する：

- 下位ユニット（T1-2）：週1-3デナル
- 中位ユニット（T3-4）：週7-15デナル
- エリート（T5-6）：週14-57デナル以上

この**4〜5倍のコスト差**が「40人の精鋭軍か、80人の中堅軍か」という根本的選択を生む。騎兵は追加で馬コスト（戦馬900デナル以上）が必要となり、経済的ハードルがさらに高い。

## 自動戦闘計算式の解剖

Bannerlord（v1.3以降）の自動戦闘システムは、**兵力パワー値**を基礎とする：

```
基本パワー = (2 + 基礎レベル) × (10 + 基礎レベル) × 0.02
騎兵補正 = ×1.2（+20%）
英雄補正 = (英雄レベル / 4 + 1) × 1.5
```

## 撤退・敗走・追撃のメカニクス設計

**撤退の条件と代償**は戦術的深度を生む核心設計だ：

1. **通常撤退**：戦場端に移動して離脱可能だが、**約6時間の移動速度ペナルティ**が発生
2. **犠牲撤退**：兵士を犠牲にして脱出（Tacticsスキルでポイントあたり-0.1%の損失軽減）
3. **自動計算撤退**：プレイヤー気絶時の自動戦闘は**兵士の質を考慮せず数のみで計算**

**追撃メカニクス**の特徴として、戦闘終了後に**全軍が約6時間の「混乱状態」**に入り、これは損害の有無に関わらず発生する。インゲームの説明では「戦利品回収と隊列再編成」とされるが、実質的に**勝利後の追撃困難**を生み、敵軍の再編成機会を与える設計だ。

## ドローン戦闘への適用分析

### 関連のある要素の検討

**1. Tier階層システム → ドローン世代・性能等級**
Mount & BladeのTier 1-6システムは、ドローンの「偵察型（T1）→汎用型（T2-3）→戦闘特化型（T4-5）→超重量級（T6）」に直接マッピング可能。**貴族ライン＝希少な先進技術ドローン**として、入手困難だが圧倒的性能という設計を踏襲できる。

**2. 経済的制約による軍編成選択**
「40機の高性能ドローンか80機の汎用機か」というトレードオフは、**エネルギー消費・メンテナンスコスト・製造リソース**に置き換え可能。Mount & Bladeの給与システムを「日次エネルギー消費」に変換することで、同様の戦略的深度を実現できる。

**3. 士気システム → 不採用
士気の連鎖崩壊メカニクスは、**指揮通信の途絶\*\*として再解釈できるかもしれないが、今は取り入れない。

**4. 自動戦闘計算式**
Bannerlordの「兵力パワー × 地形修正 × 指揮官スキル」構造は、**「ドローン戦力値 × 宙域条件 × 母艦AI性能」**に直接適用可能。地形修正テーブルは宇宙には地形はない（平地→オープンスペース、森林→小惑星帯、河川→デブリフィールド　とできるかもしれないが、採用しない）ため扱わない。

### 修正が必要な要素

**1. 「馬」の概念 → 燃料・弾薬・バッテリー**
騎兵アップグレードに馬が必要なシステムは、ドローンでは**「特殊推進剤」「高エネルギーバッテリー」「プラズマ弾薬」**として再設計。高Tierドローンほど希少リソースを要求する構造を維持する。

\*\*2. 捕虜システム → 不採用
敵ドローンの鹵獲→再プログラミング→編入というフローは、採用しない

**3. 撤退の「混乱ペナルティ」 → 再編成オーバーヘッド**
戦闘後6時間の速度低下は、**「ドローン回収・修復・再充電の強制待機時間」**として宇宙戦に自然に翻訳できる。これにより「完全勝利しないと敵が再編成する」緊張感を維持できる。

## 実装推奨事項

### 1. ドローンTierシステム設計

```
Tier 1「偵察機」：低コスト、弱武装、高速、大量運用
Tier 2「汎用機」：バランス型、アップグレード分岐点
Tier 3「特化機」：攻撃型/防御型/電子戦型に分岐
Tier 4「重装機」：高火力、高耐久、高コスト
Tier 5「精鋭機」：AI自律性向上、複雑な戦術実行可能
Tier 6「フラッグシップ機」：希少、圧倒的性能、製造に特殊素材必須
```

### 2. 自動戦闘計算式（推奨）

```
ドローンパワー = (2 + Tier) × (10 + Tier) × 0.02
母艦ボーナス = (AIレベル / 4 + 1) × 1.5
最終ダメージ = 0.5 + 0.5 × 乱数 × 40 × (攻撃パワー/防御パワー)^0.7 × 優位補正
```

### 3. 経済バランス指標

Mount & Bladeの「Tier差4-5倍コスト」を維持：

- T1ドローン維持：1エネルギー/日
- T3ドローン維持：5エネルギー/日
- T6ドローン維持：20-25エネルギー/日

**結論**：母艦の発電能力が軍編成の上限を規定し、「少数精鋭か大群運用か」の選択を強制する設計を推奨する。
